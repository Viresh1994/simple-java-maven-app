name: Helm

on:
  workflow_dispatch:
    inputs:
      component:
        description: 'Select DAMS component to deploy'
        type: choice
        required: true
        options:
          - damsui
          - damscorapi
          - damsbatchjobs

      version:
        description: 'Select version to deploy'
        type: choice
        required: true
        options:
          - 0.0.1
          - 0.0.2
          - 0.0.3
          - 0.0.4
          - latest
        default: latest

      environment:
        description: 'Target deployment environment'
        type: choice
        required: true
        options:
          - DEV
          - ITT
          - UAT

permissions:
  id-token: write
  contents: read

jobs:
  deploy-dev:
    if: ${{ github.event.inputs.env == 'DEV' }}
    runs-on: ubuntu-latest
    environment: DEV

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Deploy to DEV
        run: |
          echo "Deploying to DEV environment"
          # put your DEV deployment commands here

  deploy-itt:
    if: ${{ github.event.inputs.env == 'ITT' }}
    runs-on: ubuntu-latest
    environment: ITT

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Deploy to ITT
        run: |
          echo "Deploying to ITT environment"
          # put your ITT deployment commands here

  deploy-prod:
    if: ${{ github.event.inputs.env == 'UAT' }}
    runs-on: ubuntu-latest
    environment: UAT

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Deploy to UAT
        run: |
          echo "Deploying to UAT environment"
          # put your PROD deployment commands here
